name: Simple CI/CD Test

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  simple-test:
    name: Basic Build Test
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ”„ Checkout code
        uses: actions/checkout@v4
      
      - name: ğŸ“¦ Setup Node.js 18
        uses: actions/setup-node@v4
        with:
          node-version: '18'
      
      - name: ğŸ“ List repository structure
        run: |
          echo "Repository structure:"
          find . -type f -name "*.json" | head -20
          echo ""
          echo "CodeGuardian project files:"
          ls -la final_project/codeguardian_ai/ || echo "CodeGuardian directory not found"
      
      - name: ğŸ” Check CodeGuardian backend
        run: |
          if [ -d "final_project/codeguardian_ai/backend" ]; then
            echo "âœ… Backend directory found"
            cd final_project/codeguardian_ai/backend
            if [ -f "package.json" ]; then
              echo "âœ… Backend package.json found"
              npm install
              echo "âœ… Backend dependencies installed"
            else
              echo "âŒ Backend package.json not found"
            fi
          else
            echo "âŒ Backend directory not found"
          fi
      
      - name: ğŸ” Check CodeGuardian frontend
        run: |
          if [ -d "final_project/codeguardian_ai/frontend" ]; then
            echo "âœ… Frontend directory found"
            cd final_project/codeguardian_ai/frontend
            if [ -f "package.json" ]; then
              echo "âœ… Frontend package.json found"
              npm install
              echo "âœ… Frontend dependencies installed"
              npm run build
              echo "âœ… Frontend build successful"
            else
              echo "âŒ Frontend package.json not found"
            fi
          else
            echo "âŒ Frontend directory not found"
          fi
      
      - name: âœ… Success Message
        run: |
          echo "ğŸ‰ GitHub Actions is working!"
          echo "âœ… CI/CD pipeline executed successfully!"
          echo "ğŸš€ CodeGuardian AI project is ready for automated testing!"
