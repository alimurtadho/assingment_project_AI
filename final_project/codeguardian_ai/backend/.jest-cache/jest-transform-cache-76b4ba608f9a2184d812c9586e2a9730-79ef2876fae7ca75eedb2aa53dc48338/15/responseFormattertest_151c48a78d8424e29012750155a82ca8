ec3c0bc72ff3eda7e89440b70d5ca4f9
"use strict";

/**
 * Unit Tests for ResponseFormatter Utility
 * Tests all methods and edge cases for API response formatting
 */

const ResponseFormatter = require('../../utils/responseFormatter');
describe('ResponseFormatter Utility', () => {
  describe('success method', () => {
    test('should create success response with data', () => {
      const message = 'Operation successful';
      const data = {
        id: 1,
        name: 'test'
      };
      const result = ResponseFormatter.success(message, data);
      expect(result).toEqual({
        success: true,
        message,
        data,
        timestamp: expect.any(String)
      });

      // Verify timestamp is a valid ISO string
      expect(new Date(result.timestamp)).toBeInstanceOf(Date);
    });
    test('should create success response without data', () => {
      const message = 'Operation successful';
      const result = ResponseFormatter.success(message);
      expect(result).toEqual({
        success: true,
        message,
        data: null,
        timestamp: expect.any(String)
      });
    });
    test('should handle null message', () => {
      const result = ResponseFormatter.success(null, {
        test: 'data'
      });
      expect(result.success).toBe(true);
      expect(result.message).toBeNull();
      expect(result.data).toEqual({
        test: 'data'
      });
    });
    test('should handle empty object data', () => {
      const result = ResponseFormatter.success('Success', {});
      expect(result.success).toBe(true);
      expect(result.data).toEqual({});
    });
  });
  describe('error method', () => {
    test('should create error response with all parameters', () => {
      const message = 'Validation failed';
      const statusCode = 400;
      const errorCode = 'VALIDATION_ERROR';
      const details = {
        field: 'email',
        issue: 'invalid format'
      };
      const result = ResponseFormatter.error(message, statusCode, errorCode, details);
      expect(result).toEqual({
        success: false,
        message,
        statusCode,
        errorCode,
        details,
        timestamp: expect.any(String)
      });
    });
    test('should create error response with minimal parameters', () => {
      const message = 'Something went wrong';
      const result = ResponseFormatter.error(message);
      expect(result).toEqual({
        success: false,
        message,
        statusCode: 500,
        errorCode: 'INTERNAL_ERROR',
        details: null,
        timestamp: expect.any(String)
      });
    });
    test('should handle custom status codes', () => {
      const testCases = [{
        statusCode: 400,
        expectedCode: 'VALIDATION_ERROR'
      }, {
        statusCode: 401,
        expectedCode: 'UNAUTHORIZED'
      }, {
        statusCode: 403,
        expectedCode: 'FORBIDDEN'
      }, {
        statusCode: 404,
        expectedCode: 'NOT_FOUND'
      }, {
        statusCode: 409,
        expectedCode: 'CONFLICT'
      }, {
        statusCode: 429,
        expectedCode: 'RATE_LIMIT_EXCEEDED'
      }, {
        statusCode: 500,
        expectedCode: 'INTERNAL_ERROR'
      }];
      testCases.forEach(({
        statusCode,
        expectedCode
      }) => {
        const result = ResponseFormatter.error('Test error', statusCode);
        expect(result.statusCode).toBe(statusCode);
        expect(result.errorCode).toBe(expectedCode);
      });
    });
    test('should handle unknown status codes', () => {
      const result = ResponseFormatter.error('Unknown error', 418);
      expect(result.statusCode).toBe(418);
      expect(result.errorCode).toBe('UNKNOWN_ERROR');
    });
  });
  describe('paginated method', () => {
    test('should create paginated response with full pagination info', () => {
      const data = [{
        id: 1
      }, {
        id: 2
      }, {
        id: 3
      }];
      const pagination = {
        page: 1,
        limit: 10,
        total: 25,
        totalPages: 3
      };
      const message = 'Data retrieved successfully';
      const result = ResponseFormatter.paginated(data, pagination, message);
      expect(result).toEqual({
        success: true,
        message,
        data,
        pagination: {
          ...pagination,
          hasNext: true,
          hasPrev: false
        },
        metadata: {
          count: data.length,
          hasData: true
        },
        timestamp: expect.any(String)
      });
    });
    test('should calculate hasNext and hasPrev correctly', () => {
      const data = [{
        id: 1
      }];

      // First page
      const firstPage = ResponseFormatter.paginated(data, {
        page: 1,
        limit: 10,
        total: 25,
        totalPages: 3
      });
      expect(firstPage.pagination.hasNext).toBe(true);
      expect(firstPage.pagination.hasPrev).toBe(false);

      // Middle page
      const middlePage = ResponseFormatter.paginated(data, {
        page: 2,
        limit: 10,
        total: 25,
        totalPages: 3
      });
      expect(middlePage.pagination.hasNext).toBe(true);
      expect(middlePage.pagination.hasPrev).toBe(true);

      // Last page
      const lastPage = ResponseFormatter.paginated(data, {
        page: 3,
        limit: 10,
        total: 25,
        totalPages: 3
      });
      expect(lastPage.pagination.hasNext).toBe(false);
      expect(lastPage.pagination.hasPrev).toBe(true);
    });
    test('should handle empty data array', () => {
      const data = [];
      const pagination = {
        page: 1,
        limit: 10,
        total: 0,
        totalPages: 0
      };
      const result = ResponseFormatter.paginated(data, pagination);
      expect(result.data).toEqual([]);
      expect(result.metadata.hasData).toBe(false);
      expect(result.metadata.count).toBe(0);
    });
    test('should use default message when not provided', () => {
      const data = [{
        id: 1
      }];
      const pagination = {
        page: 1,
        limit: 10,
        total: 1,
        totalPages: 1
      };
      const result = ResponseFormatter.paginated(data, pagination);
      expect(result.message).toBe('Data retrieved successfully');
    });
  });
  describe('validation method', () => {
    test('should create validation error response', () => {
      const errors = [{
        field: 'email',
        message: 'Email is required'
      }, {
        field: 'password',
        message: 'Password too short'
      }];
      const result = ResponseFormatter.validation(errors);
      expect(result).toEqual({
        success: false,
        message: 'Validation failed',
        statusCode: 400,
        errorCode: 'VALIDATION_ERROR',
        details: {
          errors,
          errorCount: 2
        },
        timestamp: expect.any(String)
      });
    });
    test('should handle single error object', () => {
      const error = {
        field: 'name',
        message: 'Name is required'
      };
      const result = ResponseFormatter.validation(error);
      expect(result.details.errors).toEqual([error]);
      expect(result.details.errorCount).toBe(1);
    });
    test('should handle empty errors array', () => {
      const result = ResponseFormatter.validation([]);
      expect(result.details.errors).toEqual([]);
      expect(result.details.errorCount).toBe(0);
    });
  });
  describe('created method', () => {
    test('should create resource created response', () => {
      const resource = {
        id: 123,
        name: 'New Resource'
      };
      const location = '/api/resources/123';
      const result = ResponseFormatter.created(resource, location);
      expect(result).toEqual({
        success: true,
        message: 'Resource created successfully',
        data: resource,
        statusCode: 201,
        location,
        timestamp: expect.any(String)
      });
    });
    test('should work without location', () => {
      const resource = {
        id: 123
      };
      const result = ResponseFormatter.created(resource);
      expect(result.statusCode).toBe(201);
      expect(result.location).toBeUndefined();
    });
  });
  describe('updated method', () => {
    test('should create resource updated response', () => {
      const resource = {
        id: 123,
        name: 'Updated Resource',
        version: 2
      };
      const result = ResponseFormatter.updated(resource);
      expect(result).toEqual({
        success: true,
        message: 'Resource updated successfully',
        data: resource,
        statusCode: 200,
        timestamp: expect.any(String)
      });
    });
  });
  describe('deleted method', () => {
    test('should create resource deleted response', () => {
      const result = ResponseFormatter.deleted();
      expect(result).toEqual({
        success: true,
        message: 'Resource deleted successfully',
        data: null,
        statusCode: 204,
        timestamp: expect.any(String)
      });
    });
    test('should handle custom message', () => {
      const customMessage = 'User account has been permanently deleted';
      const result = ResponseFormatter.deleted(customMessage);
      expect(result.message).toBe(customMessage);
    });
  });
  describe('timestamp handling', () => {
    test('should generate ISO timestamp', () => {
      const result = ResponseFormatter.success('Test');
      expect(result.timestamp).toMatch(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/);
    });
    test('should generate unique timestamps for concurrent calls', async () => {
      const promises = Array(10).fill().map(() => Promise.resolve(ResponseFormatter.success('Test')));
      const results = await Promise.all(promises);
      const timestamps = results.map(r => r.timestamp);

      // All timestamps should be unique or very close
      const uniqueTimestamps = new Set(timestamps);
      expect(uniqueTimestamps.size).toBeGreaterThan(1);
    });
  });
  describe('edge cases and error conditions', () => {
    test('should handle circular reference in data', () => {
      const circular = {
        name: 'test'
      };
      circular.self = circular;

      // Should not throw an error
      expect(() => {
        ResponseFormatter.success('Test', circular);
      }).not.toThrow();
    });
    test('should handle very large objects', () => {
      const largeObject = {
        data: Array(1000).fill().map((_, i) => ({
          id: i,
          value: `item_${i}`
        }))
      };
      const result = ResponseFormatter.success('Large data', largeObject);
      expect(result.success).toBe(true);
      expect(result.data.data).toHaveLength(1000);
    });
    test('should handle special characters in messages', () => {
      const message = 'Message with émojis 🚀 and spëcial chars: @#$%^&*()';
      const result = ResponseFormatter.success(message);
      expect(result.message).toBe(message);
    });
    test('should handle undefined and null values properly', () => {
      const testCases = [{
        input: undefined,
        expected: null
      }, {
        input: null,
        expected: null
      }, {
        input: '',
        expected: ''
      }, {
        input: 0,
        expected: 0
      }, {
        input: false,
        expected: false
      }];
      testCases.forEach(({
        input,
        expected
      }) => {
        const result = ResponseFormatter.success('Test', input);
        expect(result.data).toBe(expected);
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZXNwb25zZUZvcm1hdHRlciIsInJlcXVpcmUiLCJkZXNjcmliZSIsInRlc3QiLCJtZXNzYWdlIiwiZGF0YSIsImlkIiwibmFtZSIsInJlc3VsdCIsInN1Y2Nlc3MiLCJleHBlY3QiLCJ0b0VxdWFsIiwidGltZXN0YW1wIiwiYW55IiwiU3RyaW5nIiwiRGF0ZSIsInRvQmVJbnN0YW5jZU9mIiwidG9CZSIsInRvQmVOdWxsIiwic3RhdHVzQ29kZSIsImVycm9yQ29kZSIsImRldGFpbHMiLCJmaWVsZCIsImlzc3VlIiwiZXJyb3IiLCJ0ZXN0Q2FzZXMiLCJleHBlY3RlZENvZGUiLCJmb3JFYWNoIiwicGFnaW5hdGlvbiIsInBhZ2UiLCJsaW1pdCIsInRvdGFsIiwidG90YWxQYWdlcyIsInBhZ2luYXRlZCIsImhhc05leHQiLCJoYXNQcmV2IiwibWV0YWRhdGEiLCJjb3VudCIsImxlbmd0aCIsImhhc0RhdGEiLCJmaXJzdFBhZ2UiLCJtaWRkbGVQYWdlIiwibGFzdFBhZ2UiLCJlcnJvcnMiLCJ2YWxpZGF0aW9uIiwiZXJyb3JDb3VudCIsInJlc291cmNlIiwibG9jYXRpb24iLCJjcmVhdGVkIiwidG9CZVVuZGVmaW5lZCIsInZlcnNpb24iLCJ1cGRhdGVkIiwiZGVsZXRlZCIsImN1c3RvbU1lc3NhZ2UiLCJ0b01hdGNoIiwicHJvbWlzZXMiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlc3VsdHMiLCJhbGwiLCJ0aW1lc3RhbXBzIiwiciIsInVuaXF1ZVRpbWVzdGFtcHMiLCJTZXQiLCJzaXplIiwidG9CZUdyZWF0ZXJUaGFuIiwiY2lyY3VsYXIiLCJzZWxmIiwibm90IiwidG9UaHJvdyIsImxhcmdlT2JqZWN0IiwiXyIsImkiLCJ2YWx1ZSIsInRvSGF2ZUxlbmd0aCIsImlucHV0IiwidW5kZWZpbmVkIiwiZXhwZWN0ZWQiXSwic291cmNlcyI6WyJyZXNwb25zZUZvcm1hdHRlci50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pdCBUZXN0cyBmb3IgUmVzcG9uc2VGb3JtYXR0ZXIgVXRpbGl0eVxuICogVGVzdHMgYWxsIG1ldGhvZHMgYW5kIGVkZ2UgY2FzZXMgZm9yIEFQSSByZXNwb25zZSBmb3JtYXR0aW5nXG4gKi9cblxuY29uc3QgUmVzcG9uc2VGb3JtYXR0ZXIgPSByZXF1aXJlKCcuLi8uLi91dGlscy9yZXNwb25zZUZvcm1hdHRlcicpO1xuXG5kZXNjcmliZSgnUmVzcG9uc2VGb3JtYXR0ZXIgVXRpbGl0eScsICgpID0+IHtcbiAgICBkZXNjcmliZSgnc3VjY2VzcyBtZXRob2QnLCAoKSA9PiB7XG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgc3VjY2VzcyByZXNwb25zZSB3aXRoIGRhdGEnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gJ09wZXJhdGlvbiBzdWNjZXNzZnVsJztcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7IGlkOiAxLCBuYW1lOiAndGVzdCcgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzcG9uc2VGb3JtYXR0ZXIuc3VjY2VzcyhtZXNzYWdlLCBkYXRhKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBleHBlY3QuYW55KFN0cmluZylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBWZXJpZnkgdGltZXN0YW1wIGlzIGEgdmFsaWQgSVNPIHN0cmluZ1xuICAgICAgICAgICAgZXhwZWN0KG5ldyBEYXRlKHJlc3VsdC50aW1lc3RhbXApKS50b0JlSW5zdGFuY2VPZihEYXRlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBzdWNjZXNzIHJlc3BvbnNlIHdpdGhvdXQgZGF0YScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnT3BlcmF0aW9uIHN1Y2Nlc3NmdWwnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZXNwb25zZUZvcm1hdHRlci5zdWNjZXNzKG1lc3NhZ2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IGV4cGVjdC5hbnkoU3RyaW5nKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbnVsbCBtZXNzYWdlJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzcG9uc2VGb3JtYXR0ZXIuc3VjY2VzcyhudWxsLCB7IHRlc3Q6ICdkYXRhJyB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5tZXNzYWdlKS50b0JlTnVsbCgpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0VxdWFsKHsgdGVzdDogJ2RhdGEnIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IG9iamVjdCBkYXRhJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzcG9uc2VGb3JtYXR0ZXIuc3VjY2VzcygnU3VjY2VzcycsIHt9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0VxdWFsKHt9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZXJyb3IgbWV0aG9kJywgKCkgPT4ge1xuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGVycm9yIHJlc3BvbnNlIHdpdGggYWxsIHBhcmFtZXRlcnMnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gJ1ZhbGlkYXRpb24gZmFpbGVkJztcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICAgICAgICBjb25zdCBlcnJvckNvZGUgPSAnVkFMSURBVElPTl9FUlJPUic7XG4gICAgICAgICAgICBjb25zdCBkZXRhaWxzID0geyBmaWVsZDogJ2VtYWlsJywgaXNzdWU6ICdpbnZhbGlkIGZvcm1hdCcgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzcG9uc2VGb3JtYXR0ZXIuZXJyb3IobWVzc2FnZSwgc3RhdHVzQ29kZSwgZXJyb3JDb2RlLCBkZXRhaWxzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgIGVycm9yQ29kZSxcbiAgICAgICAgICAgICAgICBkZXRhaWxzLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogZXhwZWN0LmFueShTdHJpbmcpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBlcnJvciByZXNwb25zZSB3aXRoIG1pbmltYWwgcGFyYW1ldGVycycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnU29tZXRoaW5nIHdlbnQgd3JvbmcnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZXNwb25zZUZvcm1hdHRlci5lcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiA1MDAsXG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiAnSU5URVJOQUxfRVJST1InLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IG51bGwsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBleHBlY3QuYW55KFN0cmluZylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGN1c3RvbSBzdGF0dXMgY29kZXMnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ZXN0Q2FzZXMgPSBbXG4gICAgICAgICAgICAgICAgeyBzdGF0dXNDb2RlOiA0MDAsIGV4cGVjdGVkQ29kZTogJ1ZBTElEQVRJT05fRVJST1InIH0sXG4gICAgICAgICAgICAgICAgeyBzdGF0dXNDb2RlOiA0MDEsIGV4cGVjdGVkQ29kZTogJ1VOQVVUSE9SSVpFRCcgfSxcbiAgICAgICAgICAgICAgICB7IHN0YXR1c0NvZGU6IDQwMywgZXhwZWN0ZWRDb2RlOiAnRk9SQklEREVOJyB9LFxuICAgICAgICAgICAgICAgIHsgc3RhdHVzQ29kZTogNDA0LCBleHBlY3RlZENvZGU6ICdOT1RfRk9VTkQnIH0sXG4gICAgICAgICAgICAgICAgeyBzdGF0dXNDb2RlOiA0MDksIGV4cGVjdGVkQ29kZTogJ0NPTkZMSUNUJyB9LFxuICAgICAgICAgICAgICAgIHsgc3RhdHVzQ29kZTogNDI5LCBleHBlY3RlZENvZGU6ICdSQVRFX0xJTUlUX0VYQ0VFREVEJyB9LFxuICAgICAgICAgICAgICAgIHsgc3RhdHVzQ29kZTogNTAwLCBleHBlY3RlZENvZGU6ICdJTlRFUk5BTF9FUlJPUicgfVxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgdGVzdENhc2VzLmZvckVhY2goKHsgc3RhdHVzQ29kZSwgZXhwZWN0ZWRDb2RlIH0pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZXNwb25zZUZvcm1hdHRlci5lcnJvcignVGVzdCBlcnJvcicsIHN0YXR1c0NvZGUpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZShzdGF0dXNDb2RlKTtcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yQ29kZSkudG9CZShleHBlY3RlZENvZGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdW5rbm93biBzdGF0dXMgY29kZXMnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZXNwb25zZUZvcm1hdHRlci5lcnJvcignVW5rbm93biBlcnJvcicsIDQxOCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg0MTgpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvckNvZGUpLnRvQmUoJ1VOS05PV05fRVJST1InKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgncGFnaW5hdGVkIG1ldGhvZCcsICgpID0+IHtcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBwYWdpbmF0ZWQgcmVzcG9uc2Ugd2l0aCBmdWxsIHBhZ2luYXRpb24gaW5mbycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBbeyBpZDogMSB9LCB7IGlkOiAyIH0sIHsgaWQ6IDMgfV07XG4gICAgICAgICAgICBjb25zdCBwYWdpbmF0aW9uID0ge1xuICAgICAgICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICAgICAgICAgIHRvdGFsOiAyNSxcbiAgICAgICAgICAgICAgICB0b3RhbFBhZ2VzOiAzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9ICdEYXRhIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZXNwb25zZUZvcm1hdHRlci5wYWdpbmF0ZWQoZGF0YSwgcGFnaW5hdGlvbiwgbWVzc2FnZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFnaW5hdGlvbixcbiAgICAgICAgICAgICAgICAgICAgaGFzTmV4dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaGFzUHJldjogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiBkYXRhLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgaGFzRGF0YTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBleHBlY3QuYW55KFN0cmluZylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdzaG91bGQgY2FsY3VsYXRlIGhhc05leHQgYW5kIGhhc1ByZXYgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IFt7IGlkOiAxIH1dO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGaXJzdCBwYWdlXG4gICAgICAgICAgICBjb25zdCBmaXJzdFBhZ2UgPSBSZXNwb25zZUZvcm1hdHRlci5wYWdpbmF0ZWQoZGF0YSwge1xuICAgICAgICAgICAgICAgIHBhZ2U6IDEsIGxpbWl0OiAxMCwgdG90YWw6IDI1LCB0b3RhbFBhZ2VzOiAzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGV4cGVjdChmaXJzdFBhZ2UucGFnaW5hdGlvbi5oYXNOZXh0KS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KGZpcnN0UGFnZS5wYWdpbmF0aW9uLmhhc1ByZXYpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNaWRkbGUgcGFnZVxuICAgICAgICAgICAgY29uc3QgbWlkZGxlUGFnZSA9IFJlc3BvbnNlRm9ybWF0dGVyLnBhZ2luYXRlZChkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGFnZTogMiwgbGltaXQ6IDEwLCB0b3RhbDogMjUsIHRvdGFsUGFnZXM6IDNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZXhwZWN0KG1pZGRsZVBhZ2UucGFnaW5hdGlvbi5oYXNOZXh0KS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KG1pZGRsZVBhZ2UucGFnaW5hdGlvbi5oYXNQcmV2KS50b0JlKHRydWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBMYXN0IHBhZ2VcbiAgICAgICAgICAgIGNvbnN0IGxhc3RQYWdlID0gUmVzcG9uc2VGb3JtYXR0ZXIucGFnaW5hdGVkKGRhdGEsIHtcbiAgICAgICAgICAgICAgICBwYWdlOiAzLCBsaW1pdDogMTAsIHRvdGFsOiAyNSwgdG90YWxQYWdlczogM1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBleHBlY3QobGFzdFBhZ2UucGFnaW5hdGlvbi5oYXNOZXh0KS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChsYXN0UGFnZS5wYWdpbmF0aW9uLmhhc1ByZXYpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgZGF0YSBhcnJheScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2luYXRpb24gPSB7IHBhZ2U6IDEsIGxpbWl0OiAxMCwgdG90YWw6IDAsIHRvdGFsUGFnZXM6IDAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzcG9uc2VGb3JtYXR0ZXIucGFnaW5hdGVkKGRhdGEsIHBhZ2luYXRpb24pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvRXF1YWwoW10pO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5tZXRhZGF0YS5oYXNEYXRhKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQubWV0YWRhdGEuY291bnQpLnRvQmUoMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB1c2UgZGVmYXVsdCBtZXNzYWdlIHdoZW4gbm90IHByb3ZpZGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IFt7IGlkOiAxIH1dO1xuICAgICAgICAgICAgY29uc3QgcGFnaW5hdGlvbiA9IHsgcGFnZTogMSwgbGltaXQ6IDEwLCB0b3RhbDogMSwgdG90YWxQYWdlczogMSB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZXNwb25zZUZvcm1hdHRlci5wYWdpbmF0ZWQoZGF0YSwgcGFnaW5hdGlvbik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQubWVzc2FnZSkudG9CZSgnRGF0YSByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3ZhbGlkYXRpb24gbWV0aG9kJywgKCkgPT4ge1xuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIHZhbGlkYXRpb24gZXJyb3IgcmVzcG9uc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlcnJvcnMgPSBbXG4gICAgICAgICAgICAgICAgeyBmaWVsZDogJ2VtYWlsJywgbWVzc2FnZTogJ0VtYWlsIGlzIHJlcXVpcmVkJyB9LFxuICAgICAgICAgICAgICAgIHsgZmllbGQ6ICdwYXNzd29yZCcsIG1lc3NhZ2U6ICdQYXNzd29yZCB0b28gc2hvcnQnIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFJlc3BvbnNlRm9ybWF0dGVyLnZhbGlkYXRpb24oZXJyb3JzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiA0MDAsXG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcnMsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yQ291bnQ6IDJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogZXhwZWN0LmFueShTdHJpbmcpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBzaW5nbGUgZXJyb3Igb2JqZWN0JywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSB7IGZpZWxkOiAnbmFtZScsIG1lc3NhZ2U6ICdOYW1lIGlzIHJlcXVpcmVkJyB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZXNwb25zZUZvcm1hdHRlci52YWxpZGF0aW9uKGVycm9yKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5kZXRhaWxzLmVycm9ycykudG9FcXVhbChbZXJyb3JdKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZGV0YWlscy5lcnJvckNvdW50KS50b0JlKDEpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGVycm9ycyBhcnJheScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFJlc3BvbnNlRm9ybWF0dGVyLnZhbGlkYXRpb24oW10pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmRldGFpbHMuZXJyb3JzKS50b0VxdWFsKFtdKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZGV0YWlscy5lcnJvckNvdW50KS50b0JlKDApO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdjcmVhdGVkIG1ldGhvZCcsICgpID0+IHtcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSByZXNvdXJjZSBjcmVhdGVkIHJlc3BvbnNlJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzb3VyY2UgPSB7IGlkOiAxMjMsIG5hbWU6ICdOZXcgUmVzb3VyY2UnIH07XG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9ICcvYXBpL3Jlc291cmNlcy8xMjMnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZXNwb25zZUZvcm1hdHRlci5jcmVhdGVkKHJlc291cmNlLCBsb2NhdGlvbik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1Jlc291cmNlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICAgICAgICBkYXRhOiByZXNvdXJjZSxcbiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiAyMDEsXG4gICAgICAgICAgICAgICAgbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBleHBlY3QuYW55KFN0cmluZylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdzaG91bGQgd29yayB3aXRob3V0IGxvY2F0aW9uJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzb3VyY2UgPSB7IGlkOiAxMjMgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzcG9uc2VGb3JtYXR0ZXIuY3JlYXRlZChyZXNvdXJjZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSgyMDEpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5sb2NhdGlvbikudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd1cGRhdGVkIG1ldGhvZCcsICgpID0+IHtcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSByZXNvdXJjZSB1cGRhdGVkIHJlc3BvbnNlJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzb3VyY2UgPSB7IGlkOiAxMjMsIG5hbWU6ICdVcGRhdGVkIFJlc291cmNlJywgdmVyc2lvbjogMiB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZXNwb25zZUZvcm1hdHRlci51cGRhdGVkKHJlc291cmNlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUmVzb3VyY2UgdXBkYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgICAgICAgIGRhdGE6IHJlc291cmNlLFxuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IDIwMCxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IGV4cGVjdC5hbnkoU3RyaW5nKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2RlbGV0ZWQgbWV0aG9kJywgKCkgPT4ge1xuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIHJlc291cmNlIGRlbGV0ZWQgcmVzcG9uc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZXNwb25zZUZvcm1hdHRlci5kZWxldGVkKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1Jlc291cmNlIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IDIwNCxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IGV4cGVjdC5hbnkoU3RyaW5nKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgY3VzdG9tIG1lc3NhZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdXN0b21NZXNzYWdlID0gJ1VzZXIgYWNjb3VudCBoYXMgYmVlbiBwZXJtYW5lbnRseSBkZWxldGVkJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzcG9uc2VGb3JtYXR0ZXIuZGVsZXRlZChjdXN0b21NZXNzYWdlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5tZXNzYWdlKS50b0JlKGN1c3RvbU1lc3NhZ2UpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd0aW1lc3RhbXAgaGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgICAgIHRlc3QoJ3Nob3VsZCBnZW5lcmF0ZSBJU08gdGltZXN0YW1wJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzcG9uc2VGb3JtYXR0ZXIuc3VjY2VzcygnVGVzdCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LnRpbWVzdGFtcCkudG9NYXRjaCgvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9VFxcZHsyfTpcXGR7Mn06XFxkezJ9XFwuXFxkezN9WiQvKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnc2hvdWxkIGdlbmVyYXRlIHVuaXF1ZSB0aW1lc3RhbXBzIGZvciBjb25jdXJyZW50IGNhbGxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBBcnJheSgxMCkuZmlsbCgpLm1hcCgoKSA9PiBcbiAgICAgICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoUmVzcG9uc2VGb3JtYXR0ZXIuc3VjY2VzcygnVGVzdCcpKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcHMgPSByZXN1bHRzLm1hcChyID0+IHIudGltZXN0YW1wKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWxsIHRpbWVzdGFtcHMgc2hvdWxkIGJlIHVuaXF1ZSBvciB2ZXJ5IGNsb3NlXG4gICAgICAgICAgICBjb25zdCB1bmlxdWVUaW1lc3RhbXBzID0gbmV3IFNldCh0aW1lc3RhbXBzKTtcbiAgICAgICAgICAgIGV4cGVjdCh1bmlxdWVUaW1lc3RhbXBzLnNpemUpLnRvQmVHcmVhdGVyVGhhbigxKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZWRnZSBjYXNlcyBhbmQgZXJyb3IgY29uZGl0aW9ucycsICgpID0+IHtcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjaXJjdWxhciByZWZlcmVuY2UgaW4gZGF0YScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNpcmN1bGFyID0geyBuYW1lOiAndGVzdCcgfTtcbiAgICAgICAgICAgIGNpcmN1bGFyLnNlbGYgPSBjaXJjdWxhcjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdWxkIG5vdCB0aHJvdyBhbiBlcnJvclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBSZXNwb25zZUZvcm1hdHRlci5zdWNjZXNzKCdUZXN0JywgY2lyY3VsYXIpO1xuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB2ZXJ5IGxhcmdlIG9iamVjdHMnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsYXJnZU9iamVjdCA9IHtcbiAgICAgICAgICAgICAgICBkYXRhOiBBcnJheSgxMDAwKS5maWxsKCkubWFwKChfLCBpKSA9PiAoeyBpZDogaSwgdmFsdWU6IGBpdGVtXyR7aX1gIH0pKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzcG9uc2VGb3JtYXR0ZXIuc3VjY2VzcygnTGFyZ2UgZGF0YScsIGxhcmdlT2JqZWN0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmRhdGEpLnRvSGF2ZUxlbmd0aCgxMDAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gbWVzc2FnZXMnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gJ01lc3NhZ2Ugd2l0aCDDqW1vamlzIPCfmoAgYW5kIHNww6tjaWFsIGNoYXJzOiBAIyQlXiYqKCknO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZXNwb25zZUZvcm1hdHRlci5zdWNjZXNzKG1lc3NhZ2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Lm1lc3NhZ2UpLnRvQmUobWVzc2FnZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdW5kZWZpbmVkIGFuZCBudWxsIHZhbHVlcyBwcm9wZXJseScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRlc3RDYXNlcyA9IFtcbiAgICAgICAgICAgICAgICB7IGlucHV0OiB1bmRlZmluZWQsIGV4cGVjdGVkOiBudWxsIH0sXG4gICAgICAgICAgICAgICAgeyBpbnB1dDogbnVsbCwgZXhwZWN0ZWQ6IG51bGwgfSxcbiAgICAgICAgICAgICAgICB7IGlucHV0OiAnJywgZXhwZWN0ZWQ6ICcnIH0sXG4gICAgICAgICAgICAgICAgeyBpbnB1dDogMCwgZXhwZWN0ZWQ6IDAgfSxcbiAgICAgICAgICAgICAgICB7IGlucHV0OiBmYWxzZSwgZXhwZWN0ZWQ6IGZhbHNlIH1cbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIHRlc3RDYXNlcy5mb3JFYWNoKCh7IGlucHV0LCBleHBlY3RlZCB9KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzcG9uc2VGb3JtYXR0ZXIuc3VjY2VzcygnVGVzdCcsIGlucHV0KTtcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvQmUoZXhwZWN0ZWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FB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