8ac9a4f9580dd4babe29fb5f3dbe2dd2
"use strict";

/**
 * Basic unit tests for ValidationUtils utility
 * Tests the actual implementation that exists
 */

const ValidationUtils = require('../../../utils/validationUtils');
describe('ValidationUtils Utility - Basic Tests', () => {
  describe('validateApiKey method', () => {
    test('should validate correct OpenAI API key format', () => {
      const validKey = 'sk-1234567890abcdef1234567890abcdef';
      const result = ValidationUtils.validateApiKey(validKey);
      expect(result).toBe(true);
    });
    test('should reject invalid API key format', () => {
      const invalidKeys = ['invalid-key', 'sk-short', '', null, undefined, 123];
      invalidKeys.forEach(key => {
        const result = ValidationUtils.validateApiKey(key);
        expect(result).toBe(false);
      });
    });
    test('should reject non-string API keys', () => {
      const nonStringKeys = [null, undefined, 123, {}, []];
      nonStringKeys.forEach(key => {
        const result = ValidationUtils.validateApiKey(key);
        expect(result).toBe(false);
      });
    });
  });
  describe('sanitizeFileContent method', () => {
    test('should remove control characters', () => {
      const content = 'console.log("test");\u0000\u0001\u0002';
      const sanitized = ValidationUtils.sanitizeFileContent(content);
      expect(sanitized).toBe('console.log("test");');
      expect(sanitized).not.toContain('\u0000');
    });
    test('should limit content to 100KB', () => {
      const largeContent = 'a'.repeat(200000); // 200KB

      const sanitized = ValidationUtils.sanitizeFileContent(largeContent);
      expect(sanitized.length).toBe(100000);
    });
    test('should handle normal content unchanged', () => {
      const content = 'function test() { return true; }';
      const sanitized = ValidationUtils.sanitizeFileContent(content);
      expect(sanitized).toBe(content);
    });
    test('should handle empty content', () => {
      const result = ValidationUtils.sanitizeFileContent('');
      expect(result).toBe('');
    });
  });
  describe('fileUploadRules method', () => {
    test('should return array of validation rules', () => {
      const rules = ValidationUtils.fileUploadRules();
      expect(Array.isArray(rules)).toBe(true);
      expect(rules.length).toBeGreaterThan(0);
    });
  });
  describe('handleValidationErrors method', () => {
    test('should be a function', () => {
      expect(typeof ValidationUtils.handleValidationErrors).toBe('function');
    });
    test('should have correct number of parameters', () => {
      expect(ValidationUtils.handleValidationErrors.length).toBe(3);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWYWxpZGF0aW9uVXRpbHMiLCJyZXF1aXJlIiwiZGVzY3JpYmUiLCJ0ZXN0IiwidmFsaWRLZXkiLCJyZXN1bHQiLCJ2YWxpZGF0ZUFwaUtleSIsImV4cGVjdCIsInRvQmUiLCJpbnZhbGlkS2V5cyIsInVuZGVmaW5lZCIsImZvckVhY2giLCJrZXkiLCJub25TdHJpbmdLZXlzIiwiY29udGVudCIsInNhbml0aXplZCIsInNhbml0aXplRmlsZUNvbnRlbnQiLCJub3QiLCJ0b0NvbnRhaW4iLCJsYXJnZUNvbnRlbnQiLCJyZXBlYXQiLCJsZW5ndGgiLCJydWxlcyIsImZpbGVVcGxvYWRSdWxlcyIsIkFycmF5IiwiaXNBcnJheSIsInRvQmVHcmVhdGVyVGhhbiIsImhhbmRsZVZhbGlkYXRpb25FcnJvcnMiXSwic291cmNlcyI6WyJ2YWxpZGF0aW9uVXRpbHMuYmFzaWMudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEJhc2ljIHVuaXQgdGVzdHMgZm9yIFZhbGlkYXRpb25VdGlscyB1dGlsaXR5XG4gKiBUZXN0cyB0aGUgYWN0dWFsIGltcGxlbWVudGF0aW9uIHRoYXQgZXhpc3RzXG4gKi9cblxuY29uc3QgVmFsaWRhdGlvblV0aWxzID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbHMvdmFsaWRhdGlvblV0aWxzJyk7XG5cbmRlc2NyaWJlKCdWYWxpZGF0aW9uVXRpbHMgVXRpbGl0eSAtIEJhc2ljIFRlc3RzJywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCd2YWxpZGF0ZUFwaUtleSBtZXRob2QnLCAoKSA9PiB7XG4gICAgICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBjb3JyZWN0IE9wZW5BSSBBUEkga2V5IGZvcm1hdCcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkS2V5ID0gJ3NrLTEyMzQ1Njc4OTBhYmNkZWYxMjM0NTY3ODkwYWJjZGVmJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gVmFsaWRhdGlvblV0aWxzLnZhbGlkYXRlQXBpS2V5KHZhbGlkS2V5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnc2hvdWxkIHJlamVjdCBpbnZhbGlkIEFQSSBrZXkgZm9ybWF0JywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW52YWxpZEtleXMgPSBbXG4gICAgICAgICAgICAgICAgJ2ludmFsaWQta2V5JyxcbiAgICAgICAgICAgICAgICAnc2stc2hvcnQnLFxuICAgICAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIDEyM1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW52YWxpZEtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFZhbGlkYXRpb25VdGlscy52YWxpZGF0ZUFwaUtleShrZXkpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZWplY3Qgbm9uLXN0cmluZyBBUEkga2V5cycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vblN0cmluZ0tleXMgPSBbbnVsbCwgdW5kZWZpbmVkLCAxMjMsIHt9LCBbXV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG5vblN0cmluZ0tleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFZhbGlkYXRpb25VdGlscy52YWxpZGF0ZUFwaUtleShrZXkpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3Nhbml0aXplRmlsZUNvbnRlbnQgbWV0aG9kJywgKCkgPT4ge1xuICAgICAgICB0ZXN0KCdzaG91bGQgcmVtb3ZlIGNvbnRyb2wgY2hhcmFjdGVycycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSAnY29uc29sZS5sb2coXCJ0ZXN0XCIpO1xcdTAwMDBcXHUwMDAxXFx1MDAwMic7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHNhbml0aXplZCA9IFZhbGlkYXRpb25VdGlscy5zYW5pdGl6ZUZpbGVDb250ZW50KGNvbnRlbnQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3Qoc2FuaXRpemVkKS50b0JlKCdjb25zb2xlLmxvZyhcInRlc3RcIik7Jyk7XG4gICAgICAgICAgICBleHBlY3Qoc2FuaXRpemVkKS5ub3QudG9Db250YWluKCdcXHUwMDAwJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBsaW1pdCBjb250ZW50IHRvIDEwMEtCJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGFyZ2VDb250ZW50ID0gJ2EnLnJlcGVhdCgyMDAwMDApOyAvLyAyMDBLQlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBzYW5pdGl6ZWQgPSBWYWxpZGF0aW9uVXRpbHMuc2FuaXRpemVGaWxlQ29udGVudChsYXJnZUNvbnRlbnQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3Qoc2FuaXRpemVkLmxlbmd0aCkudG9CZSgxMDAwMDApO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG5vcm1hbCBjb250ZW50IHVuY2hhbmdlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSAnZnVuY3Rpb24gdGVzdCgpIHsgcmV0dXJuIHRydWU7IH0nO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBzYW5pdGl6ZWQgPSBWYWxpZGF0aW9uVXRpbHMuc2FuaXRpemVGaWxlQ29udGVudChjb250ZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHNhbml0aXplZCkudG9CZShjb250ZW50KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBjb250ZW50JywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gVmFsaWRhdGlvblV0aWxzLnNhbml0aXplRmlsZUNvbnRlbnQoJycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZmlsZVVwbG9hZFJ1bGVzIG1ldGhvZCcsICgpID0+IHtcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJldHVybiBhcnJheSBvZiB2YWxpZGF0aW9uIHJ1bGVzJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcnVsZXMgPSBWYWxpZGF0aW9uVXRpbHMuZmlsZVVwbG9hZFJ1bGVzKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJ1bGVzKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdChydWxlcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnaGFuZGxlVmFsaWRhdGlvbkVycm9ycyBtZXRob2QnLCAoKSA9PiB7XG4gICAgICAgIHRlc3QoJ3Nob3VsZCBiZSBhIGZ1bmN0aW9uJywgKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KHR5cGVvZiBWYWxpZGF0aW9uVXRpbHMuaGFuZGxlVmFsaWRhdGlvbkVycm9ycykudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhdmUgY29ycmVjdCBudW1iZXIgb2YgcGFyYW1ldGVycycsICgpID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChWYWxpZGF0aW9uVXRpbHMuaGFuZGxlVmFsaWRhdGlvbkVycm9ycy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTUEsZUFBZSxHQUFHQyxPQUFPLENBQUMsZ0NBQWdDLENBQUM7QUFFakVDLFFBQVEsQ0FBQyx1Q0FBdUMsRUFBRSxNQUFNO0VBQ3BEQSxRQUFRLENBQUMsdUJBQXVCLEVBQUUsTUFBTTtJQUNwQ0MsSUFBSSxDQUFDLCtDQUErQyxFQUFFLE1BQU07TUFDeEQsTUFBTUMsUUFBUSxHQUFHLHFDQUFxQztNQUV0RCxNQUFNQyxNQUFNLEdBQUdMLGVBQWUsQ0FBQ00sY0FBYyxDQUFDRixRQUFRLENBQUM7TUFFdkRHLE1BQU0sQ0FBQ0YsTUFBTSxDQUFDLENBQUNHLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDN0IsQ0FBQyxDQUFDO0lBRUZMLElBQUksQ0FBQyxzQ0FBc0MsRUFBRSxNQUFNO01BQy9DLE1BQU1NLFdBQVcsR0FBRyxDQUNoQixhQUFhLEVBQ2IsVUFBVSxFQUNWLEVBQUUsRUFDRixJQUFJLEVBQ0pDLFNBQVMsRUFDVCxHQUFHLENBQ047TUFFREQsV0FBVyxDQUFDRSxPQUFPLENBQUNDLEdBQUcsSUFBSTtRQUN2QixNQUFNUCxNQUFNLEdBQUdMLGVBQWUsQ0FBQ00sY0FBYyxDQUFDTSxHQUFHLENBQUM7UUFDbERMLE1BQU0sQ0FBQ0YsTUFBTSxDQUFDLENBQUNHLElBQUksQ0FBQyxLQUFLLENBQUM7TUFDOUIsQ0FBQyxDQUFDO0lBQ04sQ0FBQyxDQUFDO0lBRUZMLElBQUksQ0FBQyxtQ0FBbUMsRUFBRSxNQUFNO01BQzVDLE1BQU1VLGFBQWEsR0FBRyxDQUFDLElBQUksRUFBRUgsU0FBUyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7TUFFcERHLGFBQWEsQ0FBQ0YsT0FBTyxDQUFDQyxH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