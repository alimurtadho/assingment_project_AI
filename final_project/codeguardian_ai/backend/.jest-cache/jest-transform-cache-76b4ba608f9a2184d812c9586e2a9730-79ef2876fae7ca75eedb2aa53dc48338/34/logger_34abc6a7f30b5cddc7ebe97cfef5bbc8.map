{"version":3,"names":["cov_1ynukautvj","actualCoverage","winston","s","require","path","fs","logsDir","join","__dirname","existsSync","b","mkdirSync","recursive","Logger","constructor","f","logger","createLogger","level","process","env","LOG_LEVEL","format","combine","timestamp","errors","stack","json","defaultMeta","service","transports","File","filename","Console","colorize","simple","info","message","meta","error","name","warn","debug","createRequestLogger","req","res","next","start","Date","now","on","duration","method","url","originalUrl","statusCode","userAgent","get","ip","module","exports"],"sources":["logger.js"],"sourcesContent":["// Backend Utilities - Logger\nconst winston = require('winston');\nconst path = require('path');\nconst fs = require('fs');\n\n// Ensure logs directory exists\nconst logsDir = path.join(__dirname, '..', 'logs');\nif (!fs.existsSync(logsDir)) {\n  fs.mkdirSync(logsDir, { recursive: true });\n}\n\nclass Logger {\n  constructor() {\n    this.logger = winston.createLogger({\n      level: process.env.LOG_LEVEL || 'info',\n      format: winston.format.combine(\n        winston.format.timestamp(),\n        winston.format.errors({ stack: true }),\n        winston.format.json()\n      ),\n      defaultMeta: { service: 'codeguardian-ai' },\n      transports: [\n        new winston.transports.File({ \n          filename: path.join(logsDir, 'error.log'), \n          level: 'error' \n        }),\n        new winston.transports.File({ \n          filename: path.join(logsDir, 'combined.log') \n        }),\n        new winston.transports.Console({\n          format: winston.format.combine(\n            winston.format.colorize(),\n            winston.format.simple()\n          )\n        })\n      ]\n    });\n  }\n\n  info(message, meta = {}) {\n    this.logger.info(message, meta);\n  }\n\n  error(message, error = null, meta = {}) {\n    this.logger.error(message, {\n      error: error ? {\n        message: error.message,\n        stack: error.stack,\n        name: error.name\n      } : null,\n      ...meta\n    });\n  }\n\n  warn(message, meta = {}) {\n    this.logger.warn(message, meta);\n  }\n\n  debug(message, meta = {}) {\n    this.logger.debug(message, meta);\n  }\n\n  // Create request logger middleware\n  createRequestLogger() {\n    return (req, res, next) => {\n      const start = Date.now();\n      \n      res.on('finish', () => {\n        const duration = Date.now() - start;\n        this.info('HTTP Request', {\n          method: req.method,\n          url: req.originalUrl,\n          statusCode: res.statusCode,\n          duration: `${duration}ms`,\n          userAgent: req.get('User-Agent'),\n          ip: req.ip\n        });\n      });\n      \n      next();\n    };\n  }\n}\n\n// Export singleton instance\nmodule.exports = new Logger();\n"],"mappings":"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","ignoreList":[]}